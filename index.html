<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مدیریت سرور ماینکرفت | Minecraft Server Management</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Identity Services -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        :root {
            --primary: #1E90FF; /* نیلی درخشان */
            --primary-dark: #0077E6;
            --primary-light: #4DA8FF;
            --secondary: #0A3D62; /* آبی تیره الماس */
            --light: #E6F7FF;
            --dark: #0A3D62;
            --success: #00C851;
            --danger: #FF3547;
            --warning: #FF8800;
            --gray: #8EACBB;
            --shadow: 0 8px 32px rgba(0, 119, 230, 0.2);
            --glass: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --diamond: linear-gradient(135deg, #1E90FF, #0077E6, #4DA8FF);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0A3D62, #1E3A5F, #0A3D62);
            color: var(--light);
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
            position: relative;
        }

        /* بک‌گراند لایو از بالا */
        .live-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: 
                radial-gradient(circle at 20% 80%, rgba(30, 144, 255, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(77, 168, 255, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(0, 119, 230, 0.1) 0%, transparent 50%);
            animation: flowBackground 20s ease-in-out infinite;
        }

        .live-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(0deg, transparent 0%, rgba(30, 144, 255, 0.05) 100%);
            animation: lightFlow 15s ease-in-out infinite;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .card {
            background: var(--glass);
            backdrop-filter: blur(15px);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
            border: 1px solid var(--glass-border);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            animation: cardEntrance 0.8s ease-out;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--diamond);
        }

        .card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 119, 230, 0.4);
            animation: cardHover 0.5s ease-out forwards;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 15px 0;
            animation: slideDown 1s ease-out;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo h1 {
            font-size: 1.8rem;
            color: var(--light);
            font-weight: 700;
            text-shadow: 0 0 10px rgba(30, 144, 255, 0.5);
            background: linear-gradient(90deg, #1E90FF, #4DA8FF, #1E90FF);
            background-size: 200% auto;
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: textShine 3s linear infinite;
        }

        .logo-icon {
            width: 60px;
            height: 60px;
            background: url('https://media.tenor.com/Q7lSE4S7YdoAAAAj/minecraft-tools.gif') center/contain no-repeat;
            filter: hue-rotate(180deg) brightness(1.2);
            animation: float 3s ease-in-out infinite, rotate 10s linear infinite;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 20px;
        }

        nav a {
            color: var(--light);
            text-decoration: none;
            padding: 10px 18px;
            border-radius: 12px;
            transition: all 0.3s ease;
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        nav a::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: var(--diamond);
            transition: all 0.4s ease;
            z-index: -1;
        }

        nav a:hover::before, nav a.active::before {
            left: 0;
        }

        nav a:hover, nav a.active {
            color: white;
            box-shadow: 0 5px 15px rgba(30, 144, 255, 0.4);
            transform: translateY(-3px);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: var(--diamond);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            box-shadow: 0 0 15px rgba(30, 144, 255, 0.5);
            transition: all 0.3s ease;
            animation: pulseAvatar 2s infinite;
        }

        .avatar:hover {
            transform: scale(1.2) rotate(10deg);
            box-shadow: 0 0 25px rgba(30, 144, 255, 0.8);
        }

        .avatar img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: all 0.5s ease;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: var(--diamond);
            color: white;
            box-shadow: 0 5px 15px rgba(30, 144, 255, 0.4);
            position: relative;
            overflow: hidden;
            z-index: 1;
        }

        .btn-primary::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
            z-index: -1;
        }

        .btn-primary:hover {
            box-shadow: 0 10px 30px rgba(30, 144, 255, 0.7);
            transform: translateY(-5px) scale(1.05);
            animation: btnPulse 0.5s ease-out;
        }

        .btn-primary:hover::after {
            transform: translateX(100%);
        }

        .btn-secondary {
            background: var(--glass);
            color: var(--light);
            border: 1px solid var(--glass-border);
            position: relative;
            overflow: hidden;
            z-index: 1;
        }

        .btn-secondary::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
            z-index: -1;
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 20px rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover::after {
            transform: translateX(100%);
        }

        .hero {
            text-align: center;
            padding: 50px 0;
            margin-bottom: 30px;
            position: relative;
            animation: heroEntrance 1.2s ease-out;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(30, 144, 255, 0.2) 0%, transparent 70%);
            z-index: -1;
            animation: pulseHero 4s infinite;
        }

        .hero h2 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--light);
            text-shadow: 0 0 15px rgba(30, 144, 255, 0.5);
            animation: glow 2s ease-in-out infinite alternate, textFloat 5s ease-in-out infinite;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto 25px;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.9);
            animation: fadeInUp 1s ease-out 0.3s both;
        }

        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 25px;
        }

        .status-card {
            background: var(--glass);
            border-radius: 16px;
            padding: 25px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            border-left: 6px solid var(--primary);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            animation: cardEntrance 0.8s ease-out;
        }

        .status-card:nth-child(2) {
            animation-delay: 0.2s;
        }

        .status-card::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: rotate(45deg);
            transition: all 0.5s ease;
            opacity: 0;
        }

        .status-card:hover::after {
            opacity: 1;
            animation: shine 1.5s ease;
        }

        .status-card:hover {
            transform: translateY(-10px) rotate(1deg);
            box-shadow: 0 15px 30px rgba(0, 119, 230, 0.4);
        }

        .status-card h3 {
            font-size: 1.3rem;
            color: var(--primary-light);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-card .status {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status.online {
            color: var(--success);
        }

        .status.offline {
            color: var(--danger);
        }

        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            position: relative;
        }

        .online .status-dot {
            background: var(--success);
            box-shadow: 0 0 10px var(--success);
            animation: pulse 2s infinite, dotGlow 2s infinite alternate;
        }

        .offline .status-dot {
            background: var(--danger);
            box-shadow: 0 0 10px var(--danger);
            animation: pulse 2s infinite;
        }

        .server-info {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .server-info div {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .server-info div:hover {
            background: rgba(255, 255, 255, 0.05);
            padding-left: 10px;
            padding-right: 10px;
            border-radius: 8px;
            transform: translateX(5px);
        }

        .tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 20px;
            background: var(--glass);
            border-radius: 12px;
            padding: 5px;
            position: relative;
            animation: fadeInUp 1s ease-out 0.5s both;
        }

        .tab {
            flex: 1;
            padding: 14px 20px;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-weight: 500;
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .tab.active {
            color: white;
        }

        .tab-highlight {
            position: absolute;
            top: 5px;
            height: calc(100% - 10px);
            border-radius: 8px;
            background: var(--diamond);
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 0;
            box-shadow: 0 4px 15px rgba(30, 144, 255, 0.4);
            animation: tabPulse 3s infinite;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
            animation: tabContentSlide 0.5s ease-out;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .form-control {
            width: 100%;
            padding: 14px 18px;
            border-radius: 10px;
            border: 1px solid var(--glass-border);
            background: rgba(255, 255, 255, 0.1);
            color: var(--light);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 20px rgba(30, 144, 255, 0.4);
            transform: scale(1.02);
        }

        .password-container {
            position: relative;
        }

        .toggle-password {
            position: absolute;
            top: 50%;
            left: 15px;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--light);
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }

        .toggle-password:hover {
            opacity: 1;
            transform: translateY(-50%) scale(1.2);
        }

        .users-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .user-card {
            background: var(--glass);
            border-radius: 12px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
            border: 1px solid transparent;
            animation: userCardEntrance 0.6s ease-out;
        }

        .user-card:nth-child(odd) {
            animation-delay: 0.1s;
        }

        .user-card:nth-child(even) {
            animation-delay: 0.2s;
        }

        .user-card:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--primary-light);
            transform: translateY(-8px) scale(1.03);
            box-shadow: 0 15px 25px rgba(0, 119, 230, 0.3);
            animation: userCardHover 0.5s ease-out forwards;
        }

        .user-avatar {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            background: var(--diamond);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            box-shadow: 0 0 15px rgba(30, 144, 255, 0.5);
            transition: all 0.3s ease;
            animation: pulseAvatar 3s infinite;
        }

        .user-avatar img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
        }

        .user-details {
            flex: 1;
        }

        .user-name {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .user-role {
            font-size: 0.9rem;
            color: var(--gray);
        }

        .chat-container {
            display: flex;
            flex-direction: column;
            height: 450px;
            border-radius: 16px;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            animation: chatContainerEntrance 0.8s ease-out;
        }

        .chat-header {
            background: rgba(255, 255, 255, 0.1);
            padding: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid var(--glass-border);
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .message {
            max-width: 75%;
            padding: 15px 18px;
            border-radius: 18px;
            position: relative;
            animation: messageSlide 0.5s ease-out;
        }

        .message.sent {
            align-self: flex-end;
            background: var(--diamond);
            border-bottom-right-radius: 5px;
            animation: messageSent 0.5s ease-out;
        }

        .message.received {
            align-self: flex-start;
            background: var(--glass);
            border-bottom-left-radius: 5px;
            border: 1px solid var(--glass-border);
            animation: messageReceived 0.5s ease-out;
        }

        .message-sender {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        .message-time {
            font-size: 0.8rem;
            opacity: 0.7;
            text-align: right;
            margin-top: 5px;
        }

        .chat-input {
            display: flex;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            gap: 12px;
            border-top: 1px solid var(--glass-border);
        }

        .chat-input input {
            flex: 1;
            padding: 14px 20px;
            border-radius: 25px;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            color: var(--light);
            transition: all 0.3s ease;
        }

        .chat-input input:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 15px rgba(30, 144, 255, 0.2);
            transform: scale(1.02);
        }

        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .gallery-item {
            border-radius: 12px;
            overflow: hidden;
            height: 160px;
            background: var(--glass);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.4s ease;
            cursor: pointer;
            border: 1px solid transparent;
            position: relative;
            animation: galleryItemEntrance 0.6s ease-out;
        }

        .gallery-item:nth-child(odd) {
            animation-delay: 0.1s;
        }

        .gallery-item:nth-child(even) {
            animation-delay: 0.2s;
        }

        .gallery-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--diamond);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .gallery-item:hover::before {
            opacity: 0.2;
        }

        .gallery-item:hover {
            transform: scale(1.1) rotate(3deg);
            border-color: var(--primary-light);
            box-shadow: 0 15px 30px rgba(0, 119, 230, 0.4);
            animation: galleryItemHover 0.5s ease-out forwards;
        }

        .gallery-item i {
            font-size: 3rem;
            color: rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
            z-index: 1;
        }

        .gallery-item:hover i {
            color: var(--primary-light);
            transform: scale(1.3) rotate(-10deg);
        }

        .login-container {
            max-width: 450px;
            margin: 80px auto;
            padding: 40px;
            background: var(--glass);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            box-shadow: var(--shadow);
            border: 1px solid var(--glass-border);
            position: relative;
            overflow: hidden;
            animation: loginContainerEntrance 1s ease-out;
        }

        .login-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(30, 144, 255, 0.1), transparent);
            transform: rotate(45deg);
            animation: shine 6s infinite linear;
        }

        .login-container h2 {
            text-align: center;
            margin-bottom: 30px;
            color: var(--primary-light);
            text-shadow: 0 0 10px rgba(30, 144, 255, 0.5);
            position: relative;
            animation: textShine 3s linear infinite;
        }

        .login-options {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            position: relative;
            z-index: 1;
        }

        .login-option {
            flex: 1;
            text-align: center;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .login-option.active {
            background: var(--diamond);
            color: white;
            box-shadow: 0 5px 15px rgba(30, 144, 255, 0.4);
            transform: translateY(-3px);
        }

        .divider {
            display: flex;
            align-items: center;
            margin: 25px 0;
            color: rgba(255, 255, 255, 0.5);
            position: relative;
            z-index: 1;
        }

        .divider::before, .divider::after {
            content: "";
            flex: 1;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .divider span {
            padding: 0 15px;
        }

        footer {
            text-align: center;
            padding: 40px 0;
            margin-top: 60px;
            color: rgba(255, 255, 255, 0.7);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            animation: fadeInUp 1s ease-out 0.7s both;
        }

        /* Loading Animation */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0A3D62, #1E3A5F, #0A3D62);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .loading-gif {
            width: 200px;
            height: 200px;
            background: url('https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/39ac6b8e-c8c9-4d20-a781-2b36215bf34a/darz0p6-c135df35-834a-4c05-9629-4da136081691.gif?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7InBhdGgiOiIvZi8zOWFjNmI4ZS1jOGM5LTRkMjAtYTc4MS0yYjM2MjE1YmYzNGEvZGFyejBwNi1jMTM1ZGYzNS04MzRhLTRjMDUtOTYyOS00ZGExMzYwODE2OTEuZ2lmIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmZpbGUuZG93bmxvYWQiXX0.HaGCk-B6VSmc7r7i5NStmE1Fo8psgpVh-clNqH5ehno') center/contain no-repeat;
            margin-bottom: 25px;
            filter: hue-rotate(180deg) brightness(1.2);
            animation: rotate 3s linear infinite, pulseLoading 2s infinite alternate;
        }

        .loading-text {
            font-size: 1.4rem;
            color: white;
            text-align: center;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(30, 144, 255, 0.5);
            animation: textPulse 2s infinite;
        }

        .server-address {
            font-size: 1.1rem;
            color: var(--primary-light);
            margin-top: 10px;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(30, 144, 255, 0.5);
            animation: addressGlow 3s infinite alternate;
        }

        /* انیمیشن لودینگ در پس‌زمینه */
        .loading-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }

        .loading-element {
            position: absolute;
            width: 80px;
            height: 80px;
            background: url('https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/39ac6b8e-c8c9-4d20-a781-2b36215bf34a/darz0p6-c135df35-834a-4c05-9629-4da136081691.gif?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7InBhdGgiOiIvZi8zOWFjNmI4ZS1jOGM5LTRkMjAtYTc4MS0yYjM2MjE1YmYzNGEvZGFyejBwNi1jMTM1ZGYzNS04MzRhLTRjMDUtOTYyOS00ZGExMzYwODE2OTEuZ2lmIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmZpbGUuZG93bmxvYWQiXX0.HaGCk-B6VSmc7r7i5NStmE1Fo8psgpVh-clNqH5ehno') center/contain no-repeat;
            filter: hue-rotate(180deg) brightness(1.2) opacity(0.3);
            animation: floatLoading 8s ease-in-out infinite, rotate 15s linear infinite;
        }

        .loading-element:nth-child(1) {
            top: 10%;
            left: 10%;
            animation-delay: 0s;
            width: 60px;
            height: 60px;
        }

        .loading-element:nth-child(2) {
            top: 20%;
            right: 15%;
            animation-delay: 1s;
            width: 70px;
            height: 70px;
        }

        .loading-element:nth-child(3) {
            bottom: 30%;
            left: 20%;
            animation-delay: 2s;
            width: 50px;
            height: 50px;
        }

        .loading-element:nth-child(4) {
            bottom: 15%;
            right: 25%;
            animation-delay: 3s;
            width: 65px;
            height: 65px;
        }

        .loading-element:nth-child(5) {
            top: 40%;
            left: 5%;
            animation-delay: 4s;
            width: 75px;
            height: 75px;
        }

        /* انیمیشن‌های جدید و خفن */
        @keyframes flowBackground {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-20px) scale(1.05); }
        }

        @keyframes lightFlow {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.7; }
        }

        @keyframes cardEntrance {
            from { opacity: 0; transform: translateY(50px) scale(0.9); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        @keyframes cardHover {
            0% { transform: translateY(-8px) scale(1.02); }
            50% { transform: translateY(-10px) scale(1.03); }
            100% { transform: translateY(-8px) scale(1.02); }
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes textShine {
            to { background-position: 200% center; }
        }

        @keyframes pulseAvatar {
            0%, 100% { box-shadow: 0 0 15px rgba(30, 144, 255, 0.5); }
            50% { box-shadow: 0 0 25px rgba(30, 144, 255, 0.8); }
        }

        @keyframes btnPulse {
            0% { transform: translateY(-5px) scale(1.05); }
            50% { transform: translateY(-7px) scale(1.07); }
            100% { transform: translateY(-5px) scale(1.05); }
        }

        @keyframes heroEntrance {
            from { opacity: 0; transform: translateY(100px) scale(0.8); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        @keyframes pulseHero {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 0.8; }
        }

        @keyframes textFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes dotGlow {
            from { box-shadow: 0 0 10px var(--success); }
            to { box-shadow: 0 0 20px var(--success); }
        }

        @keyframes tabPulse {
            0%, 100% { box-shadow: 0 4px 15px rgba(30, 144, 255, 0.4); }
            50% { box-shadow: 0 4px 20px rgba(30, 144, 255, 0.7); }
        }

        @keyframes tabContentSlide {
            from { opacity: 0; transform: translateX(30px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes userCardEntrance {
            from { opacity: 0; transform: translateY(30px) scale(0.9); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        @keyframes userCardHover {
            0% { transform: translateY(-8px) scale(1.03); }
            50% { transform: translateY(-10px) scale(1.05); }
            100% { transform: translateY(-8px) scale(1.03); }
        }

        @keyframes chatContainerEntrance {
            from { opacity: 0; transform: translateY(50px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        @keyframes messageSent {
            from { opacity: 0; transform: translateX(50px) scale(0.8); }
            to { opacity: 1; transform: translateX(0) scale(1); }
        }

        @keyframes messageReceived {
            from { opacity: 0; transform: translateX(-50px) scale(0.8); }
            to { opacity: 1; transform: translateX(0) scale(1); }
        }

        @keyframes galleryItemEntrance {
            from { opacity: 0; transform: scale(0.8) rotate(-10deg); }
            to { opacity: 1; transform: scale(1) rotate(0); }
        }

        @keyframes galleryItemHover {
            0% { transform: scale(1.1) rotate(3deg); }
            50% { transform: scale(1.12) rotate(5deg); }
            100% { transform: scale(1.1) rotate(3deg); }
        }

        @keyframes loginContainerEntrance {
            from { opacity: 0; transform: scale(0.8) translateY(50px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }

        @keyframes pulseLoading {
            from { transform: scale(1); }
            to { transform: scale(1.1); }
        }

        @keyframes textPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        @keyframes addressGlow {
            from { text-shadow: 0 0 10px rgba(30, 144, 255, 0.5); }
            to { text-shadow: 0 0 20px rgba(30, 144, 255, 0.8); }
        }

        @keyframes floatLoading {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-30px) rotate(180deg); }
        }

        /* انیمیشن‌های اصلی */
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        @keyframes glow {
            from { text-shadow: 0 0 10px rgba(30, 144, 255, 0.5); }
            to { text-shadow: 0 0 20px rgba(30, 144, 255, 0.8), 0 0 30px rgba(30, 144, 255, 0.6); }
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(0, 200, 81, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(0, 200, 81, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 200, 81, 0); }
        }

        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes messageSlide {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Google Sign-In Button Styling */
        #googleSignInContainer {
            display: flex;
            justify-content: center;
            margin-top: 20px;
            position: relative;
            z-index: 1;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .logo h1 {
                font-size: 1.5rem;
            }
            
            .hero h2 {
                font-size: 2rem;
            }
        }

        @media (max-width: 768px) {
            nav ul {
                display: none;
            }
            
            .status-grid {
                grid-template-columns: 1fr;
            }
            
            .users-list {
                grid-template-columns: 1fr;
            }
            
            .message {
                max-width: 90%;
            }
            
            .hero h2 {
                font-size: 1.8rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
            
            .logo h1 {
                font-size: 1.3rem;
            }
            
            .logo-icon {
                width: 50px;
                height: 50px;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .login-container {
                margin: 40px 20px;
                padding: 30px 25px;
            }
        }
    </style>
</head>
<body>
    <!-- بک‌گراند لایو از بالا -->
    <div class="live-bg"></div>

    <!-- انیمیشن لودینگ در پس‌زمینه -->
    <div class="loading-bg">
        <div class="loading-element"></div>
        <div class="loading-element"></div>
        <div class="loading-element"></div>
        <div class="loading-element"></div>
        <div class="loading-element"></div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-gif"></div>
        <div class="loading-text">در حال بارگذاری پنل مدیریت</div>
        <div class="server-address">cosjolserver.aternos.me:11940</div>
    </div>

    <!-- صفحه ورود -->
    <div id="loginPage" class="login-container">
        <h2>ورود به پنل مدیریت</h2>
        <div class="login-options">
            <div class="login-option active" id="loginTab">ورود</div>
            <div class="login-option" id="registerTab">ثبت نام</div>
        </div>
        <form id="loginForm">
            <div class="form-group">
                <label for="username">نام کاربری</label>
                <input type="text" id="username" class="form-control" placeholder="نام کاربری خود را وارد کنید">
            </div>
            <div class="form-group">
                <label for="password">رمز عبور</label>
                <div class="password-container">
                    <input type="password" id="password" class="form-control" placeholder="رمز عبور خود را وارد کنید">
                    <button type="button" class="toggle-password" id="toggleLoginPassword">
                        <i class="far fa-eye"></i>
                    </button>
                </div>
            </div>
            <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 10px;">
                <i class="fas fa-sign-in-alt"></i>
                ورود به حساب
            </button>
        </form>
        <form id="registerForm" style="display: none;">
            <div class="form-group">
                <label for="regUsername">نام کاربری</label>
                <input type="text" id="regUsername" class="form-control" placeholder="نام کاربری خود را وارد کنید">
            </div>
            <div class="form-group">
                <label for="regPassword">رمز عبور</label>
                <div class="password-container">
                    <input type="password" id="regPassword" class="form-control" placeholder="رمز عبور خود را وارد کنید">
                    <button type="button" class="toggle-password" id="toggleRegPassword">
                        <i class="far fa-eye"></i>
                    </button>
                </div>
            </div>
            <div class="form-group">
                <label for="confirmPassword">تکرار رمز عبور</label>
                <div class="password-container">
                    <input type="password" id="confirmPassword" class="form-control" placeholder="رمز عبور خود را تکرار کنید">
                    <button type="button" class="toggle-password" id="toggleConfirmPassword">
                        <i class="far fa-eye"></i>
                    </button>
                </div>
            </div>
            <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 10px;">
                <i class="fas fa-user-plus"></i>
                ثبت نام
            </button>
        </form>
        
        <div class="divider">
            <span>یا</span>
        </div>
        
        <div id="googleSignInContainer"></div>
    </div>

    <!-- صفحه اصلی (پس از ورود) -->
    <div id="mainPage" style="display: none;">
        <div class="container">
            <header>
                <div class="logo">
                    <div class="logo-icon"></div>
                    <h1>پنل مدیریت سرور ماینکرفت</h1>
                </div>
                <nav>
                    <ul>
                        <li><a href="#" class="active" data-tab="dashboard">داشبورد</a></li>
                        <li><a href="#" data-tab="users">مدیریت کاربران</a></li>
                        <li><a href="#" data-tab="chat">چت سرور</a></li>
                        <li><a href="#" data-tab="gallery">گالری سرور</a></li>
                    </ul>
                </nav>
                <div class="user-info">
                    <div class="avatar" id="userAvatar">U</div>
                    <span id="userDisplayName">کاربر</span>
                    <button class="btn btn-secondary" id="logoutBtn">
                        <i class="fas fa-sign-out-alt"></i>
                        خروج
                    </button>
                </div>
            </header>

            <section class="hero">
                <h2>مدیریت سرور ماینکرفت</h2>
                <p>پنل مدیریت ساده و کاربردی برای سرور ماینکرفت شما</p>
                <div>
                    <button class="btn btn-primary">
                        <i class="fas fa-rocket"></i>
                        شروع کنید
                    </button>
                    <button class="btn btn-secondary">
                        <i class="fas fa-book"></i>
                        راهنما
                    </button>
                </div>
            </section>

            <div class="tabs">
                <div class="tab active" data-tab="dashboard">وضعیت سرور</div>
                <div class="tab" data-tab="users">مدیریت کاربران</div>
                <div class="tab" data-tab="chat">چت سرور</div>
                <div class="tab" data-tab="gallery">گالری سرور</div>
                <div class="tab-highlight"></div>
            </div>

            <!-- محتوای تب‌ها -->
            <div class="tab-content active" id="dashboardContent">
                <div class="status-grid">
                    <div class="status-card">
                        <h3><i class="fas fa-server"></i> وضعیت سرور اصلی</h3>
                        <div class="status online">
                            <div class="status-dot"></div>
                            <span>سرور آنلاین است</span>
                        </div>
                        <div class="server-info">
                            <div>
                                <span>آدرس سرور:</span>
                                <span>cosjolserver.aternos.me:11940</span>
                            </div>
                            <div>
                                <span>بازیکنان آنلاین:</span>
                                <span>8/20</span>
                            </div>
                            <div>
                                <span>نسخه ماینکرفت:</span>
                                <span>1.19.2</span>
                            </div>
                            <div>
                                <span>پینگ سرور:</span>
                                <span>32ms</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="status-card">
                        <h3><i class="fas fa-shield-alt"></i> وضعیت سرور مینی‌گیم</h3>
                        <div class="status online">
                            <div class="status-dot"></div>
                            <span>سرور آنلاین است</span>
                        </div>
                        <div class="server-info">
                            <div>
                                <span>آدرس سرور:</span>
                                <span>minigame.cogioserver.com</span>
                            </div>
                            <div>
                                <span>بازیکنان آنلاین:</span>
                                <span>15/30</span>
                            </div>
                            <div>
                                <span>وضعیت مینی‌گیم:</span>
                                <span>BedWars فعال</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3><i class="fas fa-cogs"></i> مدیریت سرور</h3>
                    <p>ابزارهای مدیریتی برای کنترل سرور ماینکرفت</p>
                    <div class="form-group">
                        <label>آدرس سرور: cosjolserver.aternos.me:11940</label>
                    </div>
                    <div class="form-group">
                        <label>کد سرور: MC-SRV-2023-4587</label>
                    </div>
                    <div style="display: flex; gap: 10px; margin-top: 20px;">
                        <button class="btn btn-primary">
                            <i class="fas fa-code"></i>
                            کدینگ
                        </button>
                        <button class="btn btn-secondary">
                            <i class="fas fa-images"></i>
                            گالری
                        </button>
                        <button class="btn btn-secondary">
                            <i class="fas fa-download"></i>
                            پلاگین‌ها
                        </button>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="usersContent">
                <div class="card">
                    <h3><i class="fas fa-users"></i> مدیریت کاربران</h3>
                    <p>در حال حاضر ۸ کاربر در سرور اصلی فعال هستند.</p>
                    
                    <div class="users-list" id="usersList">
                        <!-- کاربران به صورت داینامیک اضافه می‌شوند -->
                    </div>
                    
                    <h3 style="margin-top: 25px;"><i class="fas fa-user-plus"></i> افزودن کاربر جدید</h3>
                    <form id="addUserForm">
                        <div class="form-group">
                            <label for="newUsername">نام کاربری</label>
                            <input type="text" id="newUsername" class="form-control" placeholder="نام کاربری را وارد کنید">
                        </div>
                        <div class="form-group">
                            <label for="newUserRole">سطح دسترسی</label>
                            <select id="newUserRole" class="form-control">
                                <option value="user">بازیکن عادی</option>
                                <option value="vip">بازیکن ویژه</option>
                                <option value="moderator">مدیر</option>
                                <option value="admin">ادمین</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-plus"></i>
                            افزودن کاربر
                        </button>
                    </form>
                </div>
            </div>

            <div class="tab-content" id="chatContent">
                <div class="card">
                    <h3><i class="fas fa-comments"></i> چت سرور</h3>
                    <p>ارتباط با سایر مدیران و کاربران سرور</p>
                    
                    <div class="chat-container">
                        <div class="chat-header">
                            <div class="status-dot online"></div>
                            <span>چت عمومی سرور - ۸ کاربر آنلاین</span>
                        </div>
                        <div class="chat-messages" id="chatMessages">
                            <!-- پیام‌ها به صورت داینامیک اضافه می‌شوند -->
                        </div>
                        <div class="chat-input">
                            <input type="text" id="messageInput" placeholder="پیام خود را بنویسید...">
                            <button class="btn btn-primary" id="sendMessageBtn">
                                <i class="fas fa-paper-plane"></i>
                                ارسال
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="galleryContent">
                <div class="card">
                    <h3><i class="fas fa-images"></i> گالری سرور</h3>
                    <p>تصاویر و اسکرین‌شات‌های سرور ماینکرفت</p>
                    
                    <div class="gallery">
                        <div class="gallery-item">
                            <i class="fas fa-mountain"></i>
                        </div>
                        <div class="gallery-item">
                            <i class="fas fa-fort-awesome"></i>
                        </div>
                        <div class="gallery-item">
                            <i class="fas fa-dragon"></i>
                        </div>
                        <div class="gallery-item">
                            <i class="fas fa-tree"></i>
                        </div>
                        <div class="gallery-item">
                            <i class="fas fa-dungeon"></i>
                        </div>
                        <div class="gallery-item">
                            <i class="fas fa-igloo"></i>
                        </div>
                    </div>
                </div>
            </div>

            <footer>
                <p>© 2023 پنل مدیریت سرور ماینکرفت | تمامی حقوق محفوظ است</p>
                <p>ارتباط با پشتیبانی: support@minecraft-management.com</p>
            </footer>
        </div>
    </div>

    <script>
        // داده‌های نمونه
        const sampleMessages = [
            { id: 1, sender: "مدیر سرور", text: "سلام به همه! سرور در حالت عالی کار می‌کند.", time: "10:30" },
            { id: 2, sender: "کاربر۱", text: "عالیه! ممنون از زحمات شما.", time: "10:32" },
            { id: 3, sender: "کاربر۲", text: "کسی می‌تونه در مورد پلاگین جدید راهنمایی کنه؟", time: "10:35" },
            { id: 4, sender: "مدیر سرور", text: "حتما! چه پلاگینی مد نظرت هست؟", time: "10:36" }
        ];

        // مدیریت وضعیت ورود
        let currentUser = null;
        const users = JSON.parse(localStorage.getItem('mcUsers')) || [];
        const messages = JSON.parse(localStorage.getItem('mcMessages')) || sampleMessages;

        // ذخیره داده‌ها در localStorage
        function saveData() {
            localStorage.setItem('mcUsers', JSON.stringify(users));
            localStorage.setItem('mcMessages', JSON.stringify(messages));
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
        }

        // بارگذاری داده‌ها از localStorage
        function loadData() {
            const storedUser = localStorage.getItem('currentUser');
            if (storedUser) {
                currentUser = JSON.parse(storedUser);
                showMainPage();
            }
        }

        // نمایش صفحه اصلی
        function showMainPage() {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('mainPage').style.display = 'block';
            
            if (currentUser) {
                document.getElementById('userDisplayName').textContent = currentUser.username;
                if (currentUser.picture) {
                    document.getElementById('userAvatar').innerHTML = `<img src="${currentUser.picture}" alt="User Avatar">`;
                } else {
                    document.getElementById('userAvatar').textContent = currentUser.username.charAt(0).toUpperCase();
                }
            }
            
            renderUsers();
            renderMessages();
            updateTabHighlight();
        }

        // رندر کردن لیست کاربران
        function renderUsers() {
            const usersList = document.getElementById('usersList');
            usersList.innerHTML = '';
            
            // فقط کاربران واقعی را نمایش می‌دهیم
            users.forEach(user => {
                const userCard = document.createElement('div');
                userCard.className = 'user-card';
                userCard.innerHTML = `
                    <div class="user-avatar">${user.picture ? `<img src="${user.picture}" alt="User Avatar">` : user.username.charAt(0).toUpperCase()}</div>
                    <div class="user-details">
                        <div class="user-name">${user.username}</div>
                        <div class="user-role">${user.role === 'admin' ? 'ادمین' : user.role === 'moderator' ? 'مدیر' : user.role === 'vip' ? 'بازیکن ویژه' : 'بازیکن عادی'}</div>
                    </div>
                `;
                usersList.appendChild(userCard);
            });
        }

        // رندر کردن پیام‌ها
        function renderMessages() {
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.innerHTML = '';
            
            messages.forEach(message => {
                const messageEl = document.createElement('div');
                messageEl.className = `message ${message.sender === (currentUser ? currentUser.username : 'مدیر سرور') ? 'sent' : 'received'}`;
                messageEl.innerHTML = `
                    <div class="message-sender">${message.sender}</div>
                    <div class="message-text">${message.text}</div>
                    <div class="message-time">${message.time}</div>
                `;
                chatMessages.appendChild(messageEl);
            });
            
            // اسکرول به پایین
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // آپدیت highlight تب‌ها
        function updateTabHighlight() {
            const activeTab = document.querySelector('.tab.active');
            const highlight = document.querySelector('.tab-highlight');
            
            if (activeTab && highlight) {
                const { offsetLeft, offsetWidth } = activeTab;
                highlight.style.width = `${offsetWidth}px`;
                highlight.style.left = `${offsetLeft}px`;
            }
        }

        // مدیریت تب‌ها
        document.querySelectorAll('.tab, nav a').forEach(tab => {
            tab.addEventListener('click', function() {
                const tabId = this.getAttribute('data-tab');
                
                // غیرفعال کردن همه تب‌ها
                document.querySelectorAll('.tab, nav a').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                // فعال کردن تب انتخاب شده
                this.classList.add('active');
                document.getElementById(`${tabId}Content`).classList.add('active');
                
                // همچنین لینک مربوطه در نوار ناوبری را فعال کنید
                document.querySelector(`nav a[data-tab="${tabId}"]`).classList.add('active');
                
                // آپدیت highlight
                updateTabHighlight();
            });
        });

        // مدیریت فرم ورود/ثبت‌نام
        document.getElementById('loginTab').addEventListener('click', function() {
            document.getElementById('loginTab').classList.add('active');
            document.getElementById('registerTab').classList.remove('active');
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('registerForm').style.display = 'none';
        });

        document.getElementById('registerTab').addEventListener('click', function() {
            document.getElementById('registerTab').classList.add('active');
            document.getElementById('loginTab').classList.remove('active');
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('registerForm').style.display = 'block';
        });

        // قابلیت نمایش/مخفی کردن رمز عبور
        document.getElementById('toggleLoginPassword').addEventListener('click', function() {
            const passwordInput = document.getElementById('password');
            const icon = this.querySelector('i');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                passwordInput.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        });

        document.getElementById('toggleRegPassword').addEventListener('click', function() {
            const passwordInput = document.getElementById('regPassword');
            const icon = this.querySelector('i');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                passwordInput.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        });

        document.getElementById('toggleConfirmPassword').addEventListener('click', function() {
            const passwordInput = document.getElementById('confirmPassword');
            const icon = this.querySelector('i');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                passwordInput.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        });

        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            if (username && password) {
                // نمایش انیمیشن لودینگ
                document.getElementById('loadingOverlay').style.display = 'flex';
                
                // شبیه‌سازی تأخیر برای ورود
                setTimeout(() => {
                    // بررسی وجود کاربر
                    const user = users.find(u => u.username === username && u.password === password);
                    if (user) {
                        currentUser = user;
                        saveData();
                        showMainPage();
                    } else {
                        alert('نام کاربری یا رمز عبور اشتباه است!');
                    }
                    
                    // مخفی کردن انیمیشن لودینگ
                    document.getElementById('loadingOverlay').style.display = 'none';
                }, 1500);
            } else {
                alert('لطفاً تمام فیلدها را پر کنید!');
            }
        });

        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('regUsername').value;
            const password = document.getElementById('regPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (username && password && confirmPassword) {
                if (password !== confirmPassword) {
                    alert('رمز عبور و تکرار آن مطابقت ندارند!');
                    return;
                }
                
                // بررسی عدم وجود کاربر تکراری
                if (users.find(u => u.username === username)) {
                    alert('این نام کاربری قبلاً ثبت شده است!');
                    return;
                }
                
                // نمایش انیمیشن لودینگ
                document.getElementById('loadingOverlay').style.display = 'flex';
                
                // شبیه‌سازی تأخیر برای ثبت‌نام
                setTimeout(() => {
                    const newUser = {
                        id: Date.now(),
                        username,
                        password,
                        role: 'user',
                        avatar: username.charAt(0).toUpperCase()
                    };
                    
                    users.push(newUser);
                    currentUser = newUser;
                    saveData();
                    showMainPage();
                    
                    alert('ثبت‌نام با موفقیت انجام شد!');
                    
                    // مخفی کردن انیمیشن لودینگ
                    document.getElementById('loadingOverlay').style.display = 'none';
                }, 1500);
            } else {
                alert('لطفاً تمام فیلدها را پر کنید!');
            }
        });

        // Google Sign-In Implementation
        function initializeGoogleSignIn() {
            // Initialize Google Sign-In
            google.accounts.id.initialize({
                client_id: "YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com", // Replace with your actual Google Client ID
                callback: handleGoogleSignIn
            });
            
            // Render the Google Sign-In button
            google.accounts.id.renderButton(
                document.getElementById("googleSignInContainer"),
                { 
                    theme: "outline", 
                    size: "large",
                    width: "100%",
                    text: "signin_with",
                    locale: "fa"
                }
            );
        }

        // Handle Google Sign-In response
        function handleGoogleSignIn(response) {
            // نمایش انیمیشن لودینگ
            document.getElementById('loadingOverlay').style.display = 'flex';
            
            // Decode the JWT token to get user info
            const responsePayload = decodeJwtResponse(response.credential);
            
            // Create user object from Google response
            const googleUser = {
                id: responsePayload.sub,
                username: responsePayload.name,
                email: responsePayload.email,
                picture: responsePayload.picture,
                role: 'user',
                isGoogleUser: true
            };
            
            // Check if user already exists
            const existingUser = users.find(u => u.email === googleUser.email);
            
            if (!existingUser) {
                users.push(googleUser);
            }
            
            currentUser = existingUser || googleUser;
            saveData();
            showMainPage();
            
            // مخفی کردن انیمیشن لودینگ
            document.getElementById('loadingOverlay').style.display = 'none';
            
            alert(`ورود با گوگل با موفقیت انجام شد! خوش آمدید ${googleUser.username}`);
        }

        // Helper function to decode JWT
        function decodeJwtResponse(token) {
            const base64Url = token.split('.')[1];
            const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
            const jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
                return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
            }).join(''));
            
            return JSON.parse(jsonPayload);
        }

        // افزودن کاربر جدید
        document.getElementById('addUserForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('newUsername').value;
            const role = document.getElementById('newUserRole').value;
            
            if (username) {
                const newUser = {
                    id: Date.now(),
                    username,
                    role,
                    avatar: username.charAt(0).toUpperCase()
                };
                
                users.push(newUser);
                saveData();
                renderUsers();
                
                document.getElementById('newUsername').value = '';
                alert('کاربر جدید با موفقیت افزوده شد!');
            } else {
                alert('لطفاً نام کاربری را وارد کنید!');
            }
        });

        // ارسال پیام
        document.getElementById('sendMessageBtn').addEventListener('click', function() {
            const messageInput = document.getElementById('messageInput');
            const messageText = messageInput.value.trim();
            
            if (messageText && currentUser) {
                const now = new Date();
                const time = `${now.getHours()}:${now.getMinutes().toString().padStart(2, '0')}`;
                
                const newMessage = {
                    id: Date.now(),
                    sender: currentUser.username,
                    text: messageText,
                    time: time
                };
                
                messages.push(newMessage);
                saveData();
                renderMessages();
                
                messageInput.value = '';
            }
        });

        // ارسال پیام با کلید Enter
        document.getElementById('messageInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                document.getElementById('sendMessageBtn').click();
            }
        });

        // خروج از حساب
        document.getElementById('logoutBtn').addEventListener('click', function() {
            // If user signed in with Google, also sign out from Google
            if (currentUser && currentUser.isGoogleUser) {
                google.accounts.id.disableAutoSelect();
            }
            
            currentUser = null;
            localStorage.removeItem('currentUser');
            document.getElementById('loginPage').style.display = 'block';
            document.getElementById('mainPage').style.display = 'none';
            
            // ریست کردن فرم‌ها
            document.getElementById('loginForm').reset();
            document.getElementById('registerForm').reset();
            document.getElementById('loginTab').click();
        });

        // بارگذاری اولیه داده‌ها
        window.addEventListener('DOMContentLoaded', function() {
            // نمایش انیمیشن لودینگ در ابتدا
            document.getElementById('loadingOverlay').style.display = 'flex';
            
            // شبیه‌سازی تأخیر برای بارگذاری اولیه
            setTimeout(() => {
                loadData();
                
                // Initialize Google Sign-In
                if (typeof google !== 'undefined') {
                    initializeGoogleSignIn();
                }
                
                // مخفی کردن انیمیشن لودینگ
                document.getElementById('loadingOverlay').style.display = 'none';
            }, 2000);
        });
    </script>
</body>
</html>